(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1969],{1969:function(e,r,t){"use strict";t.r(r),t.d(r,{PANEL_WIDTH:function(){return lr},default:function(){return cr}});var n=t(92809),o=t(67294),i=t(88306),a=t.n(i),s=t(94184),l=t.n(s),c=t(77305),d=t(60524),u=t(11163),m=t(64184),f=t(10219),v=t(41054),p=t(86896),b=t(44012),g=t(28755),E=t(52336),O=t(11826),h=t(69708),R=t(8358),y=t(92422),j=t(46199),x=t(26161),I=t(31631),S=t(9008),C=t(73955),_=t.n(C),Z=t(33289),w=t(85893),k=t(34155);const N=["resetHash"];function P(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function A(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?P(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const{RECAPTCHA_V2_KEY:D="6LcA8EUUAAAAAG17qfEfNaX6H8ozmI-IvmokZUnZ"}=k.env,T=(e,r=!1)=>{var t,n;const{data:o,error:i}=(0,Z.C0H)({variables:{captchaType:e},skip:r});return{needsCaptcha:!(null===o||void 0===o||null===(t=o.requireCaptcha)||void 0===t||!t.requireCaptcha)||!!i||!(null===o||void 0===o||null===(n=o.requireCaptcha)||void 0===n||!n.error)}},L=()=>{const{0:e,1:r}=(0,o.useState)(void 0),t=(0,o.useCallback)((()=>{r((e||0)+1)}),[e]);return[e,t]},F=e=>{let{resetHash:r}=e,t=(0,f.Z)(e,N);const{0:n,1:i}=(0,o.useState)(),{submitCount:a}=(0,v.u6)(),[,{error:s},{setValue:c}]=(0,v.U$)("captcha"),d=a>0&&s,u=(0,o.useRef)(null);return(0,o.useEffect)((()=>{if(!u.current)return;const e=_()("recatchaOncallback");return window[e]=()=>{try{grecaptcha.render(u.current,{sitekey:D,callback:e=>{c(e)},"expired-callback":()=>{c(void 0)},"error-callback":()=>{c(void 0)}})}catch(e){}},i(e),()=>{window[e]=void 0}}),[]),(0,o.useEffect)((()=>{if(r)try{c(void 0),grecaptcha.reset()}catch(e){}}),[r]),(0,w.jsxs)("div",A(A({},t),{},{children:[n&&(0,w.jsx)(S.default,{children:(0,w.jsx)("script",{src:"https://www.google.com/recaptcha/api.js?onload=".concat(n,"&render=explicit"),async:!0,defer:!0})}),(0,w.jsxs)("div",{className:l()("w-full overflow-hidden","dljoyr2"),children:[(0,w.jsx)("div",{ref:u}),d&&(0,w.jsx)("div",{className:"text-alertRed mt-1 text-sm",children:(0,w.jsx)(b.Z,A({},s))})]})]}))};var M=(0,o.memo)(F);t(75059);var U=t(56655),G=t(16869),V=t(32347),B=t(38718),K=t(23044);const q=["iconSrc","asButton"];function H(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function W(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?H(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Y=e=>{let{iconSrc:r,asButton:t}=e,n=(0,f.Z)(e,q);const o=t?g.ZP:B.Z;return(0,w.jsxs)(o,W(W({tabIndex:0,role:"button"},n),{},{className:l()(n.className,"w-full font-normal border border-gray6 h-13 pl-4 rounded-lg flex flex-row items-center justify-between cursor-pointer xs:no-underline hover:no-underline","c1g28vq9"),children:[r&&(0,w.jsx)(K.Z,{alt:"",role:"presentation",src:r,width:"24",height:"24"}),n.children,(0,w.jsx)("i",{})]}))};t(77049);var z=t(25714),Q=t(7255),X=t(9174);function J(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var $=(e,r)=>{const{sendNotification:t}=(0,h.ZP)(),{0:i,1:a}=(0,o.useState)(!1),s=(0,o.useCallback)((()=>{t((0,w.jsx)(b.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?J(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},j.Z.socialLoginError)),{type:h.Dy.ERROR,autoClose:!0})}),[t]);return{getToken:(0,o.useCallback)((async()=>{try{if(i)return;a(!0),await(0,X.u)(),FB.login((t=>{var n;"connected"===(null===t||void 0===t?void 0:t.status)?null===e||void 0===e||e(null===t||void 0===t||null===(n=t.authResponse)||void 0===n?void 0:n.accessToken):"unknown"!==(null===t||void 0===t?void 0:t.status)&&(r?r():s())}),{scope:"email,user_friends",auth_type:"reauthorize"}),a(!1)}catch(t){r?r():s(),a(!1)}}),[i,e,s,r]),fbProgress:i}};const ee=["onFacebookLogin","onFacebookRegister","returnUrl","onEmailRegister","isRegister","extraParams"];function re(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function te(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?re(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var ne=e=>{let{onFacebookLogin:r,onFacebookRegister:t,returnUrl:n,onEmailRegister:i,isRegister:a,extraParams:s}=e,c=(0,f.Z)(e,ee);const{locale:d}=(0,V.M)(),u=(0,Q.tZ)(n,d,s),v=a?u:n,p=(0,o.useCallback)((()=>{(0,m.mj)((0,G.Ht)(v,a))}),[v,a]),{getToken:g,fbProgress:E}=$(a?t:r,p);return(0,w.jsxs)("div",te(te({},c),{},{className:l()("flex flex-col space-y-4 w-full items-center",c.className),children:[(0,w.jsx)(Y,{id:a?"facebook-register":"facebook-login","data-testid":a?"facebook-register":"facebook-login",onClick:e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),g())},href:(0,G.Ht)(v,a),disabled:E,"data-element-name":a?U.zn.registerFacebook:U.Nh.loginFacebook,iconSrc:"/images/login/facebook.svg","data-event-label":a?"register-with-facebook-option":"login-with-facebook",children:(0,w.jsx)(b.Z,te({},a?z.Z.facebookBtn:j.Z.facebookBtn))}),(0,w.jsx)(Y,{id:a?"google-register":"google-login","data-testid":a?"google-register":"google-login",href:(0,G.qJ)(v,a),"data-element-name":a?U.zn.registerGoogle:U.Nh.loginGoogle,iconSrc:"/images/login/google.svg","data-event-label":a?"register-with-google-option":"login-with-google",children:(0,w.jsx)(b.Z,te({},a?z.Z.googleBtn:j.Z.googleBtn))}),(0,w.jsx)(Y,{id:a?"apple-register":"apple-login","data-testid":a?"apple-register":"apple-login",href:(0,G.Ws)(v,a),"data-element-name":a?U.zn.registerApple:U.Nh.loginApple,iconSrc:"/images/login/apple.svg","data-event-label":a?"register-with-apple-option":"login-with-apple",children:(0,w.jsx)(b.Z,te({},a?z.Z.appleBtn:j.Z.appleBtn))}),a&&(0,w.jsx)("div",{className:"w-full","data-event-category":U.hf.GTM,children:(0,w.jsx)(Y,{asButton:!0,id:"email-register","data-testid":"email-register",onClick:i,iconSrc:"/images/login/email.svg","data-event-label":"register-with-email-option",children:(0,w.jsx)(b.Z,te({},z.Z.emailBtn))})})]}))},oe=t(19501);function ie(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ae(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ie(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const se={email:oe.Z_().email(j.Z.validationEmailFormat).required(j.Z.validationEmailRequired),"current-password":oe.Z_().required(j.Z.validationPasswordRequire)},le={email:oe.Z_().email(j.Z.validationEmailFormat).required(j.Z.validationEmailRequired)},ce={verificationCode:oe.Z_().required(j.Z.verificationCodeRequired)},de={captcha:oe.Z_().required(j.Z.validationCaptchaRequired)};var ue=(e,r)=>(0,o.useMemo)((()=>{let t=se;return e===I.f7.FORGOT_PASSWORD&&(t=le),e===I.f7.SIFT_VERIFICATION&&(t=ce),r&&(t=ae(ae({},t),de)),oe.Ry().shape(t)}),[e,r]);const me=["title","description","handler","footer","className"];function fe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ve(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?fe(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fe(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var pe=e=>{let{title:r,description:t,handler:n,footer:o,className:i}=e,a=(0,f.Z)(e,me);return(0,w.jsxs)("div",ve(ve({},a),{},{className:l()(i,"flex flex-col items-center pt-8"),children:[(0,w.jsx)(K.Z,{alt:"",role:"presentation",src:"/images/login/letter.svg",width:"120",height:"120"}),(0,w.jsx)("h1",{className:"ds-font-title-2 font-semibold mb-2 mt-10",children:r}),(0,w.jsx)("div",{className:"text-center mb-9",children:t}),n,(0,w.jsx)("div",{className:"text-center ds-font-tiny text-gray6",children:o})]}))},be=t(94062),ge=t(54194),Ee=t(40165),Oe=t(37584);const he=["isLoading","loginHandler","forgotPasswordHandler","facebookLoginHandler","resendVerificationCodeHandler","returnUrl","checkVerificationCodeHandler","onLoginSuccess","isModal","reverifyMember","onRegisterClick","initialView","extraParams","disableBackButton"];function Re(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ye(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Re(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Re(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var je=e=>{let{isLoading:r,loginHandler:t,forgotPasswordHandler:n,facebookLoginHandler:i,resendVerificationCodeHandler:a,returnUrl:s,checkVerificationCodeHandler:c,onLoginSuccess:d,isModal:u,reverifyMember:S,onRegisterClick:C,initialView:_=I.f7.LOGIN,extraParams:k={},disableBackButton:N}=e,P=(0,f.Z)(e,he);const{registerUrl:A}=(0,be.Z)(s,k),D=(0,p.Z)(),{0:F,1:G}=(0,o.useState)(_),{makeAnnouncement:V}=(0,R.Z)(),{sendNotification:B,closeNotification:K}=(0,h.ZP)(),{0:q,1:H}=(0,o.useState)(null),W=F===I.f7.FORGOT_PASSWORD,[Y,z]=L(),{needsCaptcha:Q}=T(W?Z.$IZ.ForgotPassword:Z.$IZ.Login),X=ue(F,Q),J=F===I.f7.LOGIN,$=F===I.f7.FORGOT_PASSWORD_SUCCESS,ee=F===I.f7.SIFT_VERIFICATION,re=F===I.f7.REVERIFY_MEMBER,te=re||$,oe=!J&&!re&&!N,ie=J||W,ae=J,se=J,le=!ee&&!re&&!$&&Q,ce=ee,de=J,me=!te,fe=(0,o.useCallback)((e=>{e.metaKey||e.ctrlKey||((0,Oe.ZP)({event:"gaEvent",eventCategory:U.ul.GTM,eventAction:"click",eventLabel:U.ul.RESET_BTN}),e.preventDefault(),G(I.f7.FORGOT_PASSWORD))}),[]),ve=(0,o.useCallback)((async e=>{const r=await t(e),{message:n}=r;switch(n){case I.dx.LOGIN_SUCCESS:V(D.formatMessage(j.Z.loginSuccessfulAnnouncement)),d();break;case I.dx.SIFT_VERIFICATION_REQUIRED:G(I.f7.SIFT_VERIFICATION),H({memberId:r.memberId,reverifyToken:r.reverifyToken});break;case I.dx.REVERIFY_REQUIRED:G(I.f7.REVERIFY_MEMBER),H({memberId:r.memberId,reverifyToken:r.reverifyToken});break;default:{const e=n;let r;const t=![I.dx.BLOCKED_MEMBER,I.dx.BOUNCED,I.dx.PASSWORD_RESET_REQUIRED,I.dx.INITIAL_3RD_PARTY_REG].includes(e),o=[I.dx.PASSWORD_RESET_REQUIRED,I.dx.INITIAL_3RD_PARTY_REG].includes(e)?e=>{null===fe||void 0===fe||fe(e),K(r)}:void 0;r=B((0,I.e$)(e,o),{type:h.Dy.ERROR,autoClose:t})}}}),[t,d,D,V,B,K,fe]),Re=(0,o.useCallback)((async e=>{await i(e)?(V(D.formatMessage(j.Z.loginSuccessfulAnnouncement)),d()):B((0,w.jsx)(b.Z,ye({},j.Z.socialLoginError)),{type:h.Dy.ERROR,autoClose:!0})}),[i,d,D,V,B]),je=(0,o.useCallback)((async(e,r)=>{await n(e,r)?G(I.f7.FORGOT_PASSWORD_SUCCESS):z()}),[n,z]),xe=(0,o.useCallback)((async e=>{const r=ye(ye({},e),q),t=await c(r);if(t.message===I.dx.CHECK_VERIFICATION_CODE_SUCCESS)return H(null),void d();B(D.formatMessage(t.message===I.dx.WRONG_CREDENTIALS_CODE?j.Z.verificationCodeValidationError:j.Z.verificationCodeError),{type:h.Dy.ERROR,autoClose:!0})}),[q,c,d,D,B]),Ie=(0,o.useCallback)((async()=>{const e=await a(null===q||void 0===q?void 0:q.memberId);B(D.formatMessage(e?j.Z.resendVerificationCodeSuccess:j.Z.resendVerificationCodeError),{type:e?h.Dy.SUCCESS:h.Dy.ERROR,autoClose:!0})}),[a,D,q,B]),Se=(0,o.useCallback)((async()=>{const e=await S({reverifyToken:null===q||void 0===q?void 0:q.reverifyToken,memberId:null===q||void 0===q?void 0:q.memberId});B(D.formatMessage(e?j.Z.reverifyRequestEmailSuccess:j.Z.reverifyRequestEmailError),{type:e?h.Dy.SUCCESS:h.Dy.ERROR,autoClose:!0})}),[S,D,q,B]),Ce=(0,o.useCallback)((async e=>{F!==I.f7.FORGOT_PASSWORD?F!==I.f7.SIFT_VERIFICATION?await ve(e):await xe(e):await je(e.email,e.captcha)}),[F,ve,je,xe]);let _e=D.formatMessage(j.Z.title),Ze=D.formatMessage(j.Z.registrationDescription),we=D.formatMessage(j.Z.loginBtn),ke=U.Nh.loginSubmit,Ne=D.formatMessage(j.Z.loginViewStateLogin),Pe="";return J&&(Pe="login-with-email"),W&&(_e="".concat(D.formatMessage(j.Z.forgotPassword),"?"),Ze=D.formatMessage(j.Z.forgotPasswordDescription),we=D.formatMessage(j.Z.forgotPasswordBtn),ke=U.Nh.forgotPasswordSubmit,Ne=D.formatMessage(j.Z.loginViewStateForgotPassword),Pe=ke),$&&(_e=D.formatMessage(j.Z.forgotPasswordSuccess),Ze=D.formatMessage(j.Z.forgotPasswordDescriptionSuccess),Ne=D.formatMessage(j.Z.forgotPasswordSuccess)),ee&&(_e=D.formatMessage(j.Z.siftVerificationTitle),Ze=D.formatMessage(j.Z.siftVerificationDescription),we=D.formatMessage(j.Z.verificationCodeBtn),ke=U.Nh.verifySubmit,Ne=D.formatMessage(j.Z.loginViewStateVerification)),re&&(_e=D.formatMessage(j.Z.reverifyTitle),Ne=D.formatMessage(j.Z.loginViewStateEmailVerification)),(0,w.jsx)(v.J9,{initialValues:{rememberMe:!0},onSubmit:Ce,validationSchema:X,children:e=>(re&&(Ze=D.formatMessage(j.Z.reverifyDescription,{userEmail:e.values.email})),(0,w.jsxs)(Ee.Z,ye(ye({},P),{},{className:"flex flex-col items-center",dataEventCategory:U.Mk.GTM,a11yDescription:Ne,hasBackButton:oe,backButtonAriaLabel:D.formatMessage(j.Z.loginBackButton),backButtonOnClick:()=>{G(I.f7.LOGIN),H(null),e.resetForm()},isModal:u,children:[(0,w.jsxs)(v.l0,{onSubmit:e.handleSubmit,className:l()("w-full",oe&&"pt-18 sm:pt-8"),children:[(0,w.jsxs)("div",{className:l()("flex flex-col",!te&&"mb-1 md:mb-8",{"items-start":W,"items-center":J}),children:[J&&(0,w.jsx)(x.I4,{width:48,height:48,className:"mb-2"}),!te&&(0,w.jsx)("h1",{className:"ds-font-title-2 font-semibold mb-2",children:_e}),(0,w.jsxs)("div",{className:"flex flex-row space-x-1",children:[!te&&(0,w.jsx)("span",{children:Ze}),J&&(0,w.jsx)("a",{className:"text-viridian hover:no-underline",onClick:e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),C())},href:A,"data-element-name":U.Nh.signUp,"data-event-label":"signup-on-login",children:(0,w.jsx)(b.Z,ye({},j.Z.registrationLink))})]})]}),(0,w.jsxs)("div",{className:l()("flex flex-col-reverse md:flex-col items-center space-y-8",P.className),children:[(0,w.jsxs)("div",{className:"w-full",children:[(0,w.jsxs)("div",{className:"w-full flex flex-col space-y-6",children:[ie&&(0,w.jsx)(y.Z,{"aria-required":"true",id:"email",type:"email",name:"email","data-testid":"email",inputMode:"email",label:D.formatMessage(j.Z.emailLabel),className:l()("w-full",W&&"pt-4 sm:pt-0"),onChange:e.handleChange,onBlur:e.handleBlur}),ae&&(0,w.jsx)(ge.Z,{id:"current-password","data-testid":"current-password",autoComplete:"current-password",name:"current-password",label:D.formatMessage(j.Z.passwordLabel),labelChildren:(0,w.jsx)("a",{id:"forgot-password",onClick:fe,href:(0,m.Tt)(),className:"text-viridian ds-font-small hover:no-underline","data-element-name":U.Nh.forgotPassword,"data-event-label":"forgot-password-on-login",children:(0,w.jsx)(b.Z,ye({},j.Z.forgotPassword))}),onChange:e.handleChange,onBlur:e.handleBlur})]}),le&&(0,w.jsx)(M,{className:"mt-6 sm:pb-2",resetHash:Y}),se&&(0,w.jsx)(O.Z,{id:"rememberMe",name:"rememberMe",className:l()("c1jwr8t4","ds-font-small items-center xl:cursor-pointer mt-6"),checked:e.values.rememberMe,onChange:e.handleChange,children:(0,w.jsx)("span",{className:"mt-0.5",children:(0,w.jsx)(b.Z,ye({},j.Z.rememberMe))})}),ce&&(0,w.jsx)(y.Z,{"aria-required":"true",id:"verificationCode",name:"verificationCode","data-testid":"verificationCode",label:D.formatMessage(j.Z.verificationCodeLabel),onChange:e.handleChange,onBlur:e.handleBlur,className:"mt-4"}),me&&(0,w.jsx)(g.ZP,{"data-testid":"submit",type:"submit",className:l()("w-full ds-font-title-3 h-12",{"mt-4":J,"mt-6":!J}),name:"submitButton",disabled:r,variant:g.c7.PRIMARY,"data-element-name":ke,"data-event-label":Pe,children:r&&(0,w.jsx)(E.Z,{className:"my-0 mx-auto"})||we})]}),de&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"flex flex-row w-full jsutify-between items-center",children:[(0,w.jsx)("div",{className:"border-b border-gray2 w-full"}),(0,w.jsx)("span",{className:"px-3 text-gray6",children:(0,w.jsx)(b.Z,ye({},j.Z.socialDivider))}),(0,w.jsx)("div",{className:"border-b border-gray2 w-full"})]}),(0,w.jsx)(ne,{extraParams:k,returnUrl:s,onFacebookLogin:Re})]})]}),J&&(0,w.jsx)("div",{className:"flex justify-center mt-8",children:(0,w.jsx)("a",{href:(0,m.pF)(),className:"text-viridian hover:no-underline ds-font-small","data-element-name":U.Nh.loginIssues,"data-event-label":"issues-with-login-on-login",target:"_blank",rel:"noreferrer",children:(0,w.jsx)(b.Z,ye({},j.Z.issuesWithLogin))})}),ee&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"mt-8",children:(0,w.jsx)(b.Z,ye(ye({},j.Z.resendVerificationCode),{},{values:{resendBtn:(0,w.jsx)("button",{className:"text-viridian",type:"button",onClick:Ie,"data-testid":"resendCode","data-element-name":U.Nh.resendCode,children:(0,w.jsx)(b.Z,ye({},j.Z.here))})}}))}),(0,w.jsx)("div",{className:"mt-2",children:(0,w.jsx)(b.Z,ye(ye({},j.Z.contactUs),{},{values:{contactLink:(0,w.jsx)("a",{href:"mailto:privacy@meetup.com",className:"text-viridian hover:no-underline","data-element-name":U.Nh.contactUs,children:(0,w.jsx)(b.Z,ye({},j.Z.here))})}}))})]})]}),te&&(0,w.jsx)(pe,{title:_e,description:Ze,handler:re&&(0,w.jsx)("a",{href:"#",className:"text-viridian hover:no-underline ds-font-small mb-2",onClick:Se,"data-element-name":U.Nh.requestEmail,children:r&&(0,w.jsx)(E.Z,{})||D.formatMessage(j.Z.reverifyCheckListStep2)})||null,footer:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(b.Z,ye(ye({},re?j.Z.reverifyCheckListStep3:j.Z.forgotPasswordSuccessSupport),{},{values:{link:(0,w.jsx)("a",{target:"_blank",rel:"noreferrer",href:m.Dk,className:"text-viridian hover:no-underline","data-element-name":U.Nh.support,children:(0,w.jsx)(b.Z,ye({},re?j.Z.reverifyCheckListStep3Link:j.Z.forgotPasswordSuccessSupportLink))})}}))})})]})))})};t(51615);var xe=t(90025),Ie=t(143),Se=t(58118),Ce=t(17842),_e=t(33160);const Ze=["inputProps"];function we(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ke(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?we(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):we(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Ne=e=>{let{inputProps:r}=e,t=(0,f.Z)(e,Ze);const{submitCount:n}=(0,v.u6)(),[{value:o},{touched:i,error:a},{setValue:s}]=(0,v.U$)("age"),c=(n>0||i)&&a,d="age-error";return(0,w.jsxs)("div",ke(ke({},t),{},{children:[(0,w.jsx)(O.Z,ke(ke({},r),{},{id:"age",name:"age",className:l()("c1akf99s","ds-font-small items-end xl:cursor-pointer mt-1 -ml-0.5"),"aria-describedby":c?d:void 0,"data-testid":"age",checked:o,onChange:e=>s(e.currentTarget.checked),children:(0,w.jsx)("span",{className:"mr-2",children:(0,w.jsx)(b.Z,ke({},z.Z.ageText))})})),c&&(0,w.jsxs)("div",{id:d,className:"text-alertRed mt-1 ds-font-tiny",children:[(0,w.jsxs)("span",{className:"sr-only",children:[(0,w.jsx)(b.Z,ke({},j.Z.errorLabel)),"\xa0"]}),(0,w.jsx)(b.Z,ke({},a))]})]}))};t(6688);var Pe=t(12808),Ae=t(23635);function De(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Te(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?De(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):De(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Le=()=>{const{userLocation:e}=(0,Pe.TH)(),[{value:r},{touched:t,error:n},{setValue:i}]=(0,v.U$)("location"),{setFieldValue:a,submitCount:s}=(0,v.u6)(),c=(s>0||t)&&n,d=void 0!==(null===e||void 0===e?void 0:e.city)&&void 0!==(null===e||void 0===e?void 0:e.country)?"".concat(null===e||void 0===e?void 0:e.city,", ").concat(null===e||void 0===e?void 0:e.country.toUpperCase()):"",u=e=>{i(null===e||void 0===e?void 0:e.city),a("countryCode",null===e||void 0===e?void 0:e.country,!1),a("zipCode",null===e||void 0===e?void 0:e.zip,!1)};return(0,o.useEffect)((()=>{!r&&e&&u(e)}),[r,e]),(0,w.jsxs)("div",{children:[(0,w.jsx)(Ae.Z,{locationName:d,strategy:"absolute",forcedSearchParams:{},onSelect:e=>{u(e)},clickIdContext:"register",hasIcon:!0,inputClassName:"w-full rounded-l-lg rounded-r-lg border pl-11 xs:border-gray2",dropdownClassName:l()("sm:border-gray2 sm:px-1 sm:py-1 text-secondary w-full","sq0xflc"),itemClassName:"p-4",selectedItemClassName:"text-primary bg-gray1"}),c&&(0,w.jsx)("div",{id:"location-error",className:"text-alertRed mt-1 ds-font-tiny",children:(0,w.jsx)(b.Z,Te({},n))})]})};t(86456);var Fe=t(80122),Me=t(19170);let Ue;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NEW_USER=1]="NEW_USER",e[e.EXISTING_USER=2]="EXISTING_USER"}(Ue||(Ue={}));var Ge=({email:e,name:r})=>{const{setFieldValue:t,touched:n}=(0,v.u6)();return(0,o.useEffect)((()=>{e&&!n.email&&t("email",e),r&&!n.name&&t("name",r)}),[e,r,n.email,n.name]),null},Ve=t(53176),Be=t(2625),Ke=t(66452);const qe=["isLoading","registerHandler","socialRegisterHandler","returnUrl","onRegisterSuccess","isModal","onLoginClick","reverifyMember","starbucksRegisterHandler","initialViewState","extraParams"];function He(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function We(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?He(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):He(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const Ye=e=>{switch(e){case Q.dK.INVALID_NAME_FORMAT:return(0,w.jsx)(b.Z,We({},z.Z.registerInvalidName));case Q.dK.INVALID_ZIP:return(0,w.jsx)(b.Z,We({},z.Z.registerInvalidZip));case Q.dK.INVALID_CAPTCHA:return(0,w.jsx)(b.Z,We({},z.Z.registerInvalidCaptcha));case Q.dK.INVALID_PASSWORD:return(0,w.jsx)(b.Z,We({},z.Z.validationPasswordInvalid));case Q.dK.INVALID_PASSWORD_LENGTH:return(0,w.jsx)(b.Z,We(We({},z.Z.validationPasswordInvalidLength),{},{values:{HELP_LINK:(0,w.jsx)("a",{href:(0,m.jj)(),children:(0,w.jsx)(b.Z,We({},z.Z.helpPasswordLink))})}}));case Q.dK.INVALID_PASSWORD_COMMON:return(0,w.jsx)(b.Z,We(We({},z.Z.validationPasswordInvalidCommon),{},{values:{HELP_LINK:(0,w.jsx)("a",{href:(0,m.jj)(),children:(0,w.jsx)(b.Z,We({},z.Z.helpPasswordLink))})}}));case Q.dK.INVALID_PASSWORD_PWND:return(0,w.jsx)(b.Z,We(We({},z.Z.validationPasswordInvalidPwnd),{},{values:{HELP_LINK:(0,w.jsx)("a",{href:(0,m.jj)(),children:(0,w.jsx)(b.Z,We({},z.Z.helpPasswordLink))})}}));case Q.dK.MISSING_LOCATION_NUMBER_STARBUCKS:return(0,w.jsx)(b.Z,We({},z.Z.starbucksMissingNumber));case Q.dK.USED_LOCATION_NUMBER_STARBUCKS:return(0,w.jsx)(b.Z,We({},z.Z.starbucksUsedNumber));case Q.dK.INVALID_LOCATION_NUMBER_STARBUCKS:return(0,w.jsx)(b.Z,We({},z.Z.starbucksInvalidNumber));default:return(0,w.jsx)(b.Z,We({},z.Z.registerError))}};var ze=e=>{var r,t;let{isLoading:n,registerHandler:i,socialRegisterHandler:a,returnUrl:s,onRegisterSuccess:c,isModal:d,onLoginClick:O,reverifyMember:j,starbucksRegisterHandler:I,initialViewState:S=Q.KG.MAIN,extraParams:C={}}=e,_=(0,f.Z)(e,qe);const{formatMessage:k}=(0,p.Z)(),{query:N}=(0,u.useRouter)(),{remove:P}=(0,Ie.Z)(),{refetch:A}=(0,xe.Z)("cache-first",!0),{locale:D}=(0,V.M)(),{loginUrl:F,registerUrl:B}=(0,be.Z)(s,C),{0:q,1:H}=(0,o.useState)(),{login:W,loginError:Y,loginSuccess:X,called:J}=(0,Ce.Z)(),ee=null===N||void 0===N?void 0:N[Q.lB],re=null===N||void 0===N?void 0:N[Q.Lo],te=ee===Q.Su.SOCIAL;let oe=S;te&&(oe=Q.KG.SOCIAL_FINISH),ee===Q.Su.EMAIL&&(oe=Q.KG.EMAIL_FINISH),re===Q.Bt.STARBUCKS&&(oe=Q.KG.STARBUCKS);const{0:ie,1:ae}=(0,o.useState)(oe),{sendNotification:se,closeNotification:le}=(0,h.ZP)(),{makeAnnouncement:ce}=(0,R.Z)(),{0:de,1:ue}=(0,o.useState)(null),{data:me,showLoading:fe,status:ve}=((e,r,t)=>{var n,i;const[a,{data:s,called:l,loading:c,error:d}]=(0,Z.NCN)({fetchPolicy:"cache-and-network",ssr:!1});let u=Ue.UNKNOWN;[Z.VvZ.ExistingAccount,Z.VvZ.ExistingTie].includes(null===s||void 0===s||null===(n=s.thirdPartyRegistrantInfo)||void 0===n?void 0:n.status)&&(u=Ue.EXISTING_USER),(null===s||void 0===s||null===(i=s.thirdPartyRegistrantInfo)||void 0===i?void 0:i.status)===Z.VvZ.NewRegistration&&(u=Ue.NEW_USER);const m=(!!e||t&&(0,Me.sk)())&&r===Q.KG.SOCIAL_FINISH&&(!l||c)&&!d||u===Ue.EXISTING_USER||(0,Me.sk)()&&r===Q.KG.SOCIAL_FINISH;return(0,o.useEffect)((()=>{(async()=>{null!==e&&void 0!==e&&e.token&&a&&r===Q.KG.SOCIAL_FINISH&&await a({variables:{input:{token:null===e||void 0===e?void 0:e.token,service:null===e||void 0===e?void 0:e.type,grantType:(0,_e.hl)(null===e||void 0===e?void 0:e.type,!1)}}})})()}),[e,a,r]),{data:s,showLoading:m,status:u}})(q,ie,te),Oe=ie===Q.KG.MAIN,he=ie===Q.KG.EMAIL_FINISH,Re=ie===Q.KG.SOCIAL_FINISH,ye=he||Re&&!fe,je=ie===Q.KG.REVERIFY_MEMBER,Ze=ie===Q.KG.ALMOST_DONE,we=ie===Q.KG.STARBUCKS,ke=Oe||he,{needsCaptcha:Pe}=T(Z.$IZ.Register,!(he||we)),Ae=!(!he&&!we||!Pe),[De,Te]=L(),He=(0,Ve.Z)(ie,Ae),ze=(e=>{switch(e){case Q.KG.EMAIL_FINISH:return(0,w.jsx)(b.Z,We({},z.Z.registerViewStateEmailRegistration));case Q.KG.SOCIAL_FINISH:return(0,w.jsx)(b.Z,We({},z.Z.registerViewStatePersonal));case Q.KG.ALMOST_DONE:return;case Q.KG.REVERIFY_MEMBER:return(0,w.jsx)(b.Z,We({},z.Z.registerViewStateVerification));case Q.KG.MAIN:default:return(0,w.jsx)(b.Z,We({},z.Z.registerViewAllyMessage))}})(ie),Qe=Re||he||we;let Xe=U.zn.registerSubmit;Re&&((null===q||void 0===q?void 0:q.type)===Z.FRs.Facebook&&(Xe=U.zn.registerFacebook),(null===q||void 0===q?void 0:q.type)===Z.FRs.Apple&&(Xe=U.zn.registerApple),(null===q||void 0===q?void 0:q.type)===Z.FRs.Google&&(Xe=U.zn.registerGoogle)),we&&(Xe=U.zn.registerStarbucks);const Je=(0,o.useCallback)((async(e,r,t,n)=>{const o=await a(e,r,t,n);(0,_e.qz)(),o?(ce(k(z.Z.registerSuccessfulAnnouncement)),A(),c()):(Te(),se(k(z.Z.socialRegisterError),{type:h.Dy.ERROR,autoClose:!0}))}),[k,se,a,ce,c,A,Te]),$e=(0,o.useCallback)((e=>{H({token:e,type:Z.FRs.Facebook}),ae(Q.KG.SOCIAL_FINISH)}),[]),er=(0,o.useCallback)((()=>{(0,m.mj)((0,G.Ht)(B,!0))}),[B]),rr=(0,o.useCallback)((e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),O())}),[O]),{getToken:tr}=$($e,er);(0,o.useEffect)((()=>{ee===Q.Su.FACEBOOK&&(P(Q.lB),tr())}),[ee]);const nr=(0,o.useCallback)((async e=>{const r=await i(e);switch(r.message){case Q.dK.REGISTER_SUCCESS:{ce(k(z.Z.registerSuccessfulAnnouncement));const e=(0,Q.Ar)(r.memberEmail);ue({memberId:r.memberId,inboxUrl:e,reverifyToken:r.reverifyToken}),ae(Q.KG.ALMOST_DONE);break}case Q.dK.EMAIL_ALREADY_EXISTS:{let e;Te();const r=(0,w.jsx)(b.Z,We(We({},z.Z.registerEmailAreadyExists),{},{values:{LINK:(0,w.jsx)("a",{className:"underline",href:F,onClick:r=>{le(e),rr(r)},children:(0,w.jsx)(b.Z,We({},z.Z.registerEmailAreadyExistsLink))})}}));e=se(r,{type:h.Dy.ERROR,autoClose:!1});break}default:Te(),se(Ye(r.message),{type:h.Dy.ERROR,autoClose:!0})}}),[rr,F,k,le,i,ce,Te,se]),or=(0,o.useCallback)((()=>{ae(Q.KG.EMAIL_FINISH)}),[]),ir=(0,o.useCallback)((async()=>{const e=await j({reverifyToken:null===de||void 0===de?void 0:de.reverifyToken,memberId:null===de||void 0===de?void 0:de.memberId});return se(k(e?z.Z.reverifyRequestEmailSuccess:z.Z.reverifyRequestEmailError),{type:e?h.Dy.SUCCESS:h.Dy.ERROR,autoClose:!0}),!!e}),[j,de,se,k]),ar=(0,o.useCallback)((async e=>{const r=await I(e);switch(r.message){case Q.dK.REGISTER_SUCCESS:ce(k(z.Z.registerSuccessfulAnnouncement)),(0,m.mj)((0,m.PD)());break;default:Te(),se(Ye(r.message),{type:h.Dy.ERROR,autoClose:!0})}}),[I,ce,Te,se,k]);(0,o.useEffect)((()=>{const e=(0,_e.YG)();null!==e&&void 0!==e&&e.token&&H(e)}),[]);const sr=(0,o.useCallback)((async e=>{const r=We(We({},N),C),t=(0,Be.NN)(r),n=(0,Be.hX)(r),o=(0,Be.JL)(r),i=We(We({},e),{},{locale:D,groupId:t,eventId:n,returnUri:o});var a;if(Re)return null!==q&&void 0!==q&&q.token?void(await Je(i,(0,_e.Xg)(q,me),null===q||void 0===q?void 0:q.type,null===me||void 0===me||null===(a=me.thirdPartyRegistrantInfo)||void 0===a?void 0:a.refreshToken)):void 0;we?await ar(i):await nr(i)}),[nr,Je,ar,Re,we,D,q,N,me,C]);return(0,o.useEffect)((()=>{J||ve!==Ue.EXISTING_USER||(async()=>{try{var e,r;const t=q.type===Z.FRs.Google?null===me||void 0===me||null===(e=me.thirdPartyRegistrantInfo)||void 0===e?void 0:e.idToken:void 0;await W(t||(null===q||void 0===q?void 0:q.token),q.type,null===me||void 0===me||null===(r=me.thirdPartyRegistrantInfo)||void 0===r?void 0:r.refreshToken)}catch(t){(0,_e.qz)(),(0,Ke.q)(U.Mk.THIRD_PARTY_SERVICE_FAILURE),(0,U.bF)((0,Q.Qf)(null===q||void 0===q?void 0:q.type,!1)),se(k(z.Z.socialRegisterError),{type:h.Dy.ERROR,autoClose:!0}),ae(Q.KG.MAIN)}})()}),[k,me,J,q,ve,W,se]),(0,o.useEffect)((()=>{X&&((0,Ke.q)(U.Mk.THIRD_PARTY_SERVICE_SUCCESS),(0,U.bF)((0,Q.Qf)(null===q||void 0===q?void 0:q.type,!0)),A(),c(!0)),Y&&((0,Ke.q)(U.Mk.THIRD_PARTY_SERVICE_FAILURE),(0,U.bF)((0,Q.Qf)(null===q||void 0===q?void 0:q.type,!1)),(0,_e.qz)(),se(k(z.Z.socialRegisterError),{type:h.Dy.ERROR,autoClose:!0}),ae(Q.KG.MAIN))}),[k,c,X,Y,A,null===q||void 0===q?void 0:q.type,se]),(0,w.jsx)(v.J9,{initialValues:{age:!1,name:null===me||void 0===me||null===(r=me.thirdPartyRegistrantInfo)||void 0===r?void 0:r.name,email:null===me||void 0===me||null===(t=me.thirdPartyRegistrantInfo)||void 0===t?void 0:t.email},onSubmit:sr,validationSchema:He,children:e=>{var r,t,o,i,a,c,u,f;return(0,w.jsxs)(Ee.Z,We(We({},_),{},{className:"flex flex-col items-center",dataEventCategory:U.hf.GTM,a11yDescription:ze,hasBackButton:ye,backButtonAriaLabel:k(z.Z.registerBackButton),backButtonOnClick:()=>{(0,_e.qz)(),te?(0,m.mj)(B):(null===e||void 0===e||e.resetForm(),ae(Q.KG.MAIN))},isModal:d,showBg:Qe,isRegister:!0,children:[(0,w.jsxs)(v.l0,{className:l()("w-full",(he||Re)&&"pt-18 sm:pt-8",we&&"pt-8",!d&&"px-6 sm:px-0"),children:[(0,w.jsxs)("div",{className:l()("flex flex-col",Oe||we?"items-center":"items-start"),children:[Oe&&(0,w.jsx)(x.I4,{width:48,height:48,className:"mb-2"}),we&&(0,w.jsx)("div",{className:"mb-4",children:(0,w.jsx)(K.Z,{alt:"",role:"presentation",src:"/images/register/starbucks-meetup-logo-mini.svg",width:"178",height:"64"})}),!je&&!Ze&&(0,w.jsx)("h1",{className:"ds-font-title-2 font-semibold mb-2",children:(0,w.jsx)(b.Z,We({},Oe||we?z.Z.title:z.Z.emailSignupTitle))}),Re&&fe&&(0,w.jsx)(E.Z,{className:"mt-20 mb-8 mx-auto"}),we&&(0,w.jsx)("div",{className:"text-center",children:(0,w.jsx)(b.Z,We({},z.Z.starbucksDescription))})]}),(ye||we)&&(0,w.jsxs)("div",{className:"w-full flex flex-col space-y-6 mb-4 mt-8",children:[(0,w.jsx)(Ge,{email:null===me||void 0===me||null===(r=me.thirdPartyRegistrantInfo)||void 0===r?void 0:r.email,name:null===me||void 0===me||null===(t=me.thirdPartyRegistrantInfo)||void 0===t?void 0:t.name}),(0,w.jsx)(y.Z,{autoFocus:!0,"aria-required":"true",id:"name","data-testid":"name",type:"text",autoComplete:"name",name:"name",label:k(we?z.Z.starbucksStoreName:z.Z.registerNameLabel),onChange:null===e||void 0===e?void 0:e.handleChange,onBlur:null===e||void 0===e?void 0:e.handleBlur,labelClassname:"ds-font-body-medium",hint:k(we?z.Z.starbucksStoreNameHint:z.Z.nameHint),value:(null===e||void 0===e||null===(o=e.values)||void 0===o?void 0:o.name)||""}),we&&(0,w.jsx)(y.Z,{"aria-required":"true",id:"storeNumber","data-testid":"storeNumber",type:"text",name:"storeNumber",label:k(z.Z.starbucksStoreNumber),onChange:null===e||void 0===e?void 0:e.handleChange,onBlur:null===e||void 0===e?void 0:e.handleBlur,labelClassname:"ds-font-body-medium",value:(null===e||void 0===e||null===(i=e.values)||void 0===i?void 0:i.storeNumber)||""}),(0,w.jsx)(y.Z,{"aria-required":"true",id:"email",type:"email",name:"email","data-testid":"email",placeholder:"example@email.com",inputMode:"email",label:k(we?z.Z.starbucksEmailLabel:z.Z.emailLabel),className:"w-full relative",onChange:null===e||void 0===e?void 0:e.handleChange,onBlur:null===e||void 0===e?void 0:e.handleBlur,hint:k(z.Z.emailHint),value:(null===e||void 0===e||null===(a=e.values)||void 0===a?void 0:a.email)||""}),(he||we)&&(0,w.jsxs)("div",{className:"w-full relative space-y-2",children:[(0,w.jsx)(ge.Z,{id:"new-password","data-testid":"new-password",autoComplete:"new-password",name:"new-password",label:k(z.Z.registerPasswordLabel),labelContainerClassname:"xs:justify-start space-x-1 xs:items-center",onChange:null===e||void 0===e?void 0:e.handleChange,onBlur:null===e||void 0===e?void 0:e.handleBlur,labelChildren:(0,w.jsx)(Se.Z,{btnClassName:"mb-1.5",ariaLabel:k(z.Z.passwordTooltipAriaLabel),toolTipText:k(z.Z.passwordTooltipText),linkMessage:k(z.Z.tooltipLinkText),linkUrl:(0,m.jj)()})}),(0,w.jsx)(Fe.Z,{password:null===e||void 0===e||null===(c=e.values)||void 0===c?void 0:c["new-password"]})]}),(0,w.jsxs)("span",{className:"flex my-4 flex-col",children:[(0,w.jsx)("label",{className:l()("mb-1 font-medium"),htmlFor:"location-bar-in-register",children:(0,w.jsx)(b.Z,We({},z.Z.locationLabel))}),(0,w.jsx)(Le,{}),(0,w.jsx)("span",{className:"text-gray6 text-xs font-normal mt-1",children:(0,w.jsx)(b.Z,We({},z.Z.locationHint))})]}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"flex flex-row space-x-1 items-center",children:[(0,w.jsx)("span",{id:"age-label",className:"ds-font-body-medium",children:(0,w.jsx)(b.Z,We({},z.Z.ageLabel))}),(0,w.jsx)(Se.Z,{ariaLabel:k(z.Z.ageTooltipAriaLabel),toolTipText:k(z.Z.ageTooltipText),linkMessage:k(z.Z.tooltipLinkText),linkUrl:(0,m.GU)()})]}),(0,w.jsx)(Ne,{inputProps:{"aria-labelledby":"age-label"}})]}),Ae&&(0,w.jsx)(M,{className:"sm:pb-2",resetHash:De}),(0,w.jsx)(g.ZP,{"data-testid":"submit-email-registration",type:"submit",className:"w-full ds-font-title-3 h-12",name:"submitRegistrationButton",disabled:n,variant:g.c7.PRIMARY,"data-element-name":Xe,"data-event-label":(0,Q.HA)(ie),children:n&&(0,w.jsx)(E.Z,{className:"my-0 mx-auto"})||(0,w.jsx)(b.Z,We({},z.Z.registerBtn))}),(0,w.jsx)("p",{className:"ds-font-small text-center",children:(0,w.jsx)(b.Z,We(We({},z.Z.termsText),{},{values:{TERMS_LINK:(0,w.jsx)("a",{className:"underline text-viridian",href:(0,m.Kp)(D),"data-element-name":U.zn.terms,children:(0,w.jsx)(b.Z,We({},z.Z.termsLink))}),PRIVACY_LINK:(0,w.jsx)("a",{className:"underline text-viridian",href:(0,m.pw)(D),"data-element-name":U.zn.privacy,children:(0,w.jsx)(b.Z,We({},z.Z.privacyLink))}),COOKIES_LINK:(0,w.jsx)("a",{className:"underline text-viridian",href:(0,m.Vq)(D),"data-element-name":U.zn.cookies,children:(0,w.jsx)(b.Z,We({},z.Z.cookiesLink))})}}))})]}),ke&&(0,w.jsxs)("div",{className:"flex space-x-1 justify-center",children:[(0,w.jsx)("span",{children:(0,w.jsx)(b.Z,We({},z.Z.registerDescription))}),(0,w.jsx)("a",{className:"text-viridian hover:no-underline",onClick:rr,href:F,"data-element-name":U.zn.logIn,children:(0,w.jsx)(b.Z,We({},z.Z.loginLink))})]}),Oe&&(0,w.jsx)(ne,{onFacebookRegister:$e,isRegister:!0,returnUrl:s,extraParams:C,onEmailRegister:or,className:"mt-8"})]}),je&&(0,w.jsx)(pe,{className:!d&&"px-6 sm:px-0",title:k(z.Z.reverifyTitle),description:k(z.Z.reverifyDescription,{userEmail:null===e||void 0===e||null===(u=e.values)||void 0===u?void 0:u.email}),handler:(0,w.jsx)("a",{href:"#",className:"text-viridian hover:no-underline ds-font-small mb-2",onClick:ir,"data-element-name":U.zn.requestEmail,children:n&&(0,w.jsx)(E.Z,{})||(0,w.jsx)(b.Z,We({},z.Z.reverifyHandler))}),footer:(0,w.jsx)(b.Z,We(We({},z.Z.reverifyFooter),{},{values:{link:(0,w.jsx)("a",{target:"_blank",rel:"noreferrer",href:m.Dk,className:"text-viridian hover:no-underline","data-element-name":U.zn.support,children:(0,w.jsx)(b.Z,We({},z.Z.reverifyFooterLink))})}}))}),Ze&&(0,w.jsx)(pe,{className:!d&&"px-6 sm:px-0",title:k(z.Z.verificationTitle),description:k(z.Z.verificationDescription,{EMAIL:null===e||void 0===e||null===(f=e.values)||void 0===f?void 0:f.email}),handler:(null===de||void 0===de?void 0:de.inboxUrl)&&(0,w.jsx)(g.ZP,{type:"button",className:"w-full ds-font-title-3 h-12 mb-4",variant:g.c7.PRIMARY,onClick:()=>{window.open(null===de||void 0===de?void 0:de.inboxUrl,"_blank")},"data-event-label":"register-check-your-inbox",children:(0,w.jsx)(b.Z,We({},z.Z.verificationCheckBtn))}),footer:(0,w.jsx)(b.Z,We(We({},z.Z.verificationResendText),{},{values:{VERIFICATION:(0,w.jsx)("a",{href:"#",className:"text-viridian hover:no-underline",onClick:async()=>{await ir()&&!n&&ae(Q.KG.REVERIFY_MEMBER)},"data-element-name":U.zn.requestEmail,"data-event-label":"register-request-another-verification-email",children:n&&(0,w.jsx)(E.Z,{className:"my-0 mx-auto",size:"xs"})||(0,w.jsx)(b.Z,We({},z.Z.verificationResendLink))})}}))})]}))}})},Qe=t(65424),Xe=t(1719);function Je(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function $e(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Je(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Je(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function er(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var rr=()=>{const{refetch:e}=(0,xe.Z)("cache-first",!0),{sendNotification:r}=(0,h.ZP)(),[t,{error:i,loading:a}]=(0,Z.GGd)(),s=(0,o.useCallback)((async r=>{try{var n,o;const i=await t({variables:{input:{token:r,refreshToken:null,service:Z.FRs.Facebook,grantType:Z.eWF.AccessToken}},context:{headers:{[Qe.eX]:null===(n=(0,Qe.pc)())||void 0===n?void 0:n.token,[Xe.G]:(0,Xe.V)()}}}),a=null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.loginWithThirdPartyService;return(0,I.gC)(a)?(e(),(0,Ke.q)(U.Mk.FACEBOOK_SUCCESS),(0,U.bF)(U.Mk.FACEBOOK_SUCCESS),!0):((0,Ke.q)(U.Mk.FACEBOOK_FAILURE),(0,U.bF)(U.Mk.FACEBOOK_FAILURE),!1)}catch(i){return(0,Ke.q)(U.Mk.FACEBOOK_FAILURE),(0,U.bF)(U.Mk.FACEBOOK_FAILURE),!1}}),[t,e]);return(0,o.useEffect)((()=>{i&&r((0,w.jsx)(b.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?er(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):er(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},j.Z.loginError)),{type:h.Dy.ERROR,autoClose:!0})}),[i,r]),{loading:a,facebookLogin:s}};function tr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}const nr=()=>{const{sendNotification:e}=(0,h.ZP)(),[r,{error:t,loading:i}]=(0,Z.JX8)(),[a,{error:s,loading:l}]=(0,Z.mE4)(),[c,{error:d,loading:u}]=(0,Z.J7b)(),m=(0,o.useCallback)((async e=>{try{var t,n,o;const s=await r({variables:{input:{name:e.name,password:e["new-password"],email:e.email,countryCode:e.countryCode,zipCode:e.zipCode,locale:e.locale,captchaCode:e.captcha||"",referenceGroupId:e.groupId,referenceEventId:e.eventId,returnUri:e.returnUri}},context:{headers:{[Xe.G]:(0,Xe.V)()}}}),l=null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.registerMemberWithEmail;var i,a;return(0,Q.lX)(l)?((0,U.w4)(),(0,Ke.q)(U.hf.SUCCESS),(0,U.n7)(U.hf.SUCCESS),{message:Q.dK.REGISTER_SUCCESS,memberId:null===l||void 0===l||null===(i=l.member)||void 0===i?void 0:i.id,memberEmail:null===l||void 0===l||null===(a=l.member)||void 0===a?void 0:a.email,reverifyToken:null===l||void 0===l?void 0:l.reverifyToken}):((0,Ke.q)(U.hf.FAILURE),(0,U.n7)("".concat(U.hf.FAILURE,"-").concat((null===l||void 0===l||null===(n=l.error)||void 0===n?void 0:n.code)||Q.dK.REGISTER_FAILURE)),(0,Q.zg)(null===l||void 0===l||null===(o=l.error)||void 0===o?void 0:o.code))}catch(s){return(0,Ke.q)(U.hf.FAILURE),{message:Q.dK.REGISTER_FAILURE}}}),[r]),f=(0,o.useCallback)((async(e,r,t,n)=>{let o,i;t===Z.FRs.Facebook&&(o=U.hf.FACEBOOK_SUCCESS,i=U.hf.FACEBOOK_FAILURE),t===Z.FRs.Apple&&(o=U.hf.APPLE_SUCCESS,i=U.hf.APPLE_FAILURE),t===Z.FRs.Google&&(o=U.hf.GOOGLE_SUCCESS,i=U.hf.GOOGLE_FAILURE);try{var s,l;const c=await a({variables:{input:{token:r,refreshToken:n,service:t,grantType:(0,_e.hl)(t,!!n),name:e.name,email:e.email,countryCode:e.countryCode,zipCode:e.zipCode,locale:e.locale}},context:{headers:{[Xe.G]:(0,Xe.V)()}}}),d=null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.registerMemberWithThirdPartyService;return!d||null!==d&&void 0!==d&&null!==(l=d.errors)&&void 0!==l&&l.length?((0,Ke.q)(i),(0,U.n7)(i),!1):((0,U.w4)(),(0,Ke.q)(o),(0,U.n7)(o),!0)}catch(c){return(0,Ke.q)(i),(0,U.n7)(i),!1}}),[a]),v=(0,o.useCallback)((async e=>{try{var r,t,n;const o=await c({variables:{input:{storeNumber:e.storeNumber,name:e.name,password:e["new-password"],email:e.email,countryCode:e.countryCode,zipCode:e.zipCode,locale:e.locale,captchaCode:e.captcha||"",provider:"Starbucks"}},context:{headers:{[Xe.G]:(0,Xe.V)()}}}),i=null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.customRegister;return(0,Q.lX)(i)?((0,U.w4)(),(0,Ke.q)(U.hf.STARBUCKS_SUCCESS),(0,U.n7)(U.hf.STARBUCKS_SUCCESS),{message:Q.dK.REGISTER_SUCCESS}):((0,Ke.q)(U.hf.STARBUCKS_FAILURE),(0,U.n7)("".concat(U.hf.STARBUCKS_FAILURE,"-").concat((null===i||void 0===i||null===(t=i.error)||void 0===t?void 0:t.code)||Q.dK.REGISTER_FAILURE)),(0,Q.zg)(null===i||void 0===i||null===(n=i.error)||void 0===n?void 0:n.code))}catch(o){return(0,Ke.q)(U.hf.STARBUCKS_FAILURE),{message:Q.dK.REGISTER_FAILURE}}}),[c]);(0,o.useEffect)((()=>{(t||s||d)&&e((0,w.jsx)(b.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?tr(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},z.Z.registerError)),{type:h.Dy.ERROR,autoClose:!0})}),[t,s,d,e]);return{register:m,socialRegister:f,starbucksRegister:v,loading:l||i||u}};function or(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var ir=e=>{const{sendNotification:r}=(0,h.ZP)(),[t,{error:i,loading:a}]=(0,Z.yZs)();(0,o.useEffect)((()=>{i&&r((0,w.jsx)(b.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?or(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):or(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e?z.Z.reverifyRequestEmailError:j.Z.reverifyRequestEmailError)),{type:h.Dy.ERROR,autoClose:!0})}),[i,e,r]);return{loading:a,reverifyMember:(0,o.useCallback)((async r=>{try{var n,o;const i=await t({variables:{input:{reverifyToken:r.reverifyToken,memberId:Number(r.memberId),emailRedirectTo:""}}});return null!==i&&void 0!==i&&null!==(n=i.data)&&void 0!==n&&null!==(o=n.reverifyMember)&&void 0!==o&&o.error?((0,Ke.q)(e?U.hf.REVERIFY_REQUEST_EMAIL_AGAIN_FAILURE:U.Mk.REVERIFY_REQUEST_EMAIL_AGAIN_FAILURE),!1):((0,Ke.q)(e?U.hf.REVERIFY_REQUEST_EMAIL_AGAIN_SUCCESS:U.Mk.REVERIFY_REQUEST_EMAIL_AGAIN_SUCCESS),!0)}catch(i){return(0,Ke.q)(e?U.hf.REVERIFY_REQUEST_EMAIL_AGAIN_FAILURE:U.Mk.REVERIFY_REQUEST_EMAIL_AGAIN_FAILURE),!1}}),[t,e])}};function ar(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function sr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ar(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ar(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const lr=484;function cr({isModal:e,onLoginSuccess:r,onRegisterSuccess:t,isOpen:n,onClose:i,initialState:s,onAuthModalToggleView:f,queryParams:v}){const{query:p,asPath:g}=(0,u.useRouter)(),E=sr(sr({},p),v),O=s===_e.f7.REGISTER,R=s===_e.f7.FORGOT_PASSWORD,{loading:y,login:x,sendForgotPassword:S,resendVerificationCode:C,checkVerificationCode:_}=(()=>{const{refetch:e}=(0,xe.Z)("cache-first",!0),{sendNotification:r}=(0,h.ZP)(),[t,{error:n,loading:i}]=(0,Z.YAP)(),[a,{error:s,loading:l}]=(0,Z.sKL)(),[c,{error:d,loading:u}]=(0,Z.TGQ)(),[m,{error:f,loading:v,data:p}]=(0,Z.mZm)(),g=(0,o.useCallback)((async r=>{var n,o;try{var i,a,s;const l=await t({variables:{input:{email:r.email,password:r["current-password"],captchaToken:(null===r||void 0===r?void 0:r.captcha)||void 0,rememberMe:r.rememberMe}},context:{headers:{[Qe.eX]:null===(i=(0,Qe.pc)())||void 0===i?void 0:i.token,[Xe.G]:(0,Xe.V)()}}}),c=null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.login;if((0,I.Ro)(c))return(0,Ke.q)(U.Mk.SIFT_VERIFICATION_REQUIRED),{message:I.dx.SIFT_VERIFICATION_REQUIRED,memberId:null===c||void 0===c?void 0:c.memberId,reverifyToken:null===c||void 0===c?void 0:c.reverifyToken};if((0,I.YM)(c))return(0,Ke.q)(U.Mk.REVERIFY_REQUIRED),{message:I.dx.REVERIFY_REQUIRED,memberId:null===c||void 0===c?void 0:c.memberId,reverifyToken:null===c||void 0===c?void 0:c.reverifyToken};if((0,I.gC)(c))return e(),(0,Ke.q)(U.Mk.SUCCESS),(0,U.bF)(U.Mk.SUCCESS),{message:I.dx.LOGIN_SUCCESS};switch((0,Ke.q)(U.Mk.FAILURE),(0,U.bF)("".concat(U.Mk.FAILURE,"-").concat((null===c||void 0===c||null===(s=c.error)||void 0===s?void 0:s.code)||I.dx.LOGIN_FAILURE)),null===c||void 0===c||null===(n=c.error)||void 0===n?void 0:n.code){case I.dx.WRONG_CREDENTIALS_CODE:case I.dx.RATE_LIMIT_EXCEEDED:case I.dx.BLOCKED_IP:case I.dx.BLOCKED_MEMBER:case I.dx.PASSWORD_RESET_REQUIRED:case I.dx.BOUNCED:case I.dx.INITIAL_3RD_PARTY_REG:case I.dx.REVERIFY_ERROR_CODE:return{message:null===c||void 0===c||null===(o=c.error)||void 0===o?void 0:o.code};default:return{message:I.dx.LOGIN_FAILURE}}}catch(l){return(0,Ke.q)(U.Mk.FAILURE),(0,U.bF)(U.Mk.FAILURE),{message:I.dx.LOGIN_FAILURE}}}),[t,e]),E=(0,o.useCallback)((async(e,r)=>{try{var t,n;const o=await m({variables:{input:{email:e,captchaCode:r}},context:{headers:{[Qe.eX]:null===(t=(0,Qe.pc)())||void 0===t?void 0:t.token,[Xe.G]:(0,Xe.V)()}}}),i=null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.sendForgotPasswordEmail;return null!==i&&void 0!==i&&i.error?((0,Ke.q)(U.Mk.FORGOT_PASSWORD_REQUEST_FAILURE),(0,U.bF)(U.Mk.FORGOT_PASSWORD_REQUEST_FAILURE),!1):((0,Ke.q)(U.Mk.FORGOT_PASSWORD_REQUEST_SUCCESS),(0,U.bF)(U.Mk.FORGOT_PASSWORD_REQUEST_SUCCESS),!0)}catch(o){return(0,Ke.q)(U.Mk.FORGOT_PASSWORD_REQUEST_FAILURE),(0,U.bF)(U.Mk.FORGOT_PASSWORD_REQUEST_FAILURE),!1}}),[m]),O=(0,o.useCallback)((async e=>{try{var r;const t=await a({variables:{input:{memberId:e}}});return"RESEND"===(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.resendVerificationCode)?((0,Ke.q)(U.Mk.RESEND_VERIFICATION_CODE_SUCCESS),!0):((0,Ke.q)(U.Mk.RESEND_VERIFICATION_CODE_FAILURE),!1)}catch(t){return(0,Ke.q)(U.Mk.RESEND_VERIFICATION_CODE_FAILURE),!1}}),[a]),R=(0,o.useCallback)((async r=>{try{var t;const n=await c({variables:{input:{memberId:r.memberId,code:r.verificationCode,reverifyToken:r.reverifyToken,rememberMe:r.rememberMe}}}),o=null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.checkSiftVerificationCode;return"INVALID"===(null===o||void 0===o?void 0:o.status)?((0,Ke.q)(U.Mk.CHECK_VERIFICATION_CODE_FAILURE),{message:I.dx.WRONG_CREDENTIALS_CODE}):"VALID"!==(null===o||void 0===o?void 0:o.status)||null!==o&&void 0!==o&&o.error?((0,Ke.q)(U.Mk.CHECK_VERIFICATION_CODE_FAILURE),{message:I.dx.CHECK_VERIFICATION_CODE_FAILURE}):(e(),(0,Ke.q)(U.Mk.CHECK_VERIFICATION_CODE_SUCCESS),{message:I.dx.CHECK_VERIFICATION_CODE_SUCCESS})}catch(n){return(0,Ke.q)(U.Mk.CHECK_VERIFICATION_CODE_FAILURE),{message:I.dx.CHECK_VERIFICATION_CODE_FAILURE}}}),[c,e]);return(0,o.useEffect)((()=>{n&&r((0,w.jsx)(b.Z,$e({},j.Z.loginError)),{type:h.Dy.ERROR,autoClose:!0}),s&&r((0,w.jsx)(b.Z,$e({},j.Z.resendVerificationCodeError)),{type:h.Dy.ERROR,autoClose:!0}),d&&r((0,w.jsx)(b.Z,$e({},j.Z.verificationCodeError)),{type:h.Dy.ERROR,autoClose:!0})}),[n,s,d,r]),(0,o.useEffect)((()=>{var e;(f||null!==p&&void 0!==p&&null!==(e=p.sendForgotPasswordEmail)&&void 0!==e&&e.error)&&r((0,w.jsx)(b.Z,$e({},j.Z.forgotPassowrdCodeError)),{type:h.Dy.ERROR,autoClose:!0})}),[f,p,r]),{loading:i||l||u||v,login:g,sendForgotPassword:E,resendVerificationCode:O,checkVerificationCode:R}})(),{register:k,socialRegister:N,starbucksRegister:P,loading:A}=nr(),{facebookLogin:D,loading:T}=rr(),{reverifyMember:L,loading:F}=ir(O),M=(0,I.S7)("".concat((0,Be.JL)(E)||(e?"".concat(m.mC).concat(g):(0,m.cd)()))),G=(0,_e.sh)(sr(sr({},E),{},{[Be.R9]:M})),{registerUrl:V,loginUrl:B}=(0,be.Z)(M,v),K=(0,o.useMemo)((()=>a()((n=>(o=!1)=>{n!==_e.f7.REGISTER||o||!G?e?(n===_e.f7.LOGIN&&(null===r||void 0===r||r()),n===_e.f7.REGISTER&&(null===t||void 0===t||t())):(0,I.d8)(M,m.ir):(0,I.d8)((0,m.bj)(M,v),m.ir)}))),[e,M,r,t,v,G]),q=(0,o.useCallback)((()=>{e?f():(0,m.ir)(O?B:V)}),[O,e,B,V,f]),H=O?(0,w.jsx)(ze,{returnUrl:M,registerHandler:k,socialRegisterHandler:N,isLoading:A||F,onRegisterSuccess:K(_e.f7.REGISTER),isModal:e,reverifyMember:L,onLoginClick:q,starbucksRegisterHandler:P,extraParams:v}):(0,w.jsx)(je,{returnUrl:M,loginHandler:x,forgotPasswordHandler:S,facebookLoginHandler:D,isLoading:y||T||F,resendVerificationCodeHandler:C,checkVerificationCodeHandler:_,onLoginSuccess:K(_e.f7.LOGIN),isModal:e,reverifyMember:L,onRegisterClick:q,extraParams:v,disableBackButton:R,initialView:R?I.f7.FORGOT_PASSWORD:void 0});return(0,w.jsx)("div",{className:"flex flex-col items-center flex-grow",children:e?(0,w.jsx)(d.Z,{isOpen:n,onClose:i,dataEventLabel:O?"Register modal":"Login modal",closeBtnDataEventLabel:O?"register-close-modal":"login-close-modal",className:l()("pl-0 pr-0 sm:pl-10 sm:pr-10","a27i9ef"),children:(0,w.jsx)("div",{className:"flex flex-col items-center px-6 sm:px-0",children:H})}):(0,w.jsx)(c.Z,{noPadding:O,className:l()("w-full flex flex-col items-center mb-16 mt-4 sm:mt-10"),children:(0,w.jsx)("div",{className:l()("sm:border sm:border-gray2 sm:rounded-lg sm:p-8 sm:pb-15 relative w-full flex flex-col items-center","d1jywajc"),children:H})})})}t(58922)},31631:function(e,r,t){"use strict";t.d(r,{dx:function(){return m},f7:function(){return f},d8:function(){return v},S7:function(){return p},Ro:function(){return b},YM:function(){return g},gC:function(){return E},e$:function(){return O}});var n=t(92809),o=t(44012),i=t(64184),a=t(48848),s=t(46199),l=t(56655),c=t(85893);function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}let m,f;!function(e){e.LOGIN_SUCCESS="login-succeeded",e.SIFT_VERIFICATION_REQUIRED="login-sift-verification-required",e.CHECK_VERIFICATION_CODE_SUCCESS="login-check-verification-code-succeeded",e.CHECK_VERIFICATION_CODE_FAILURE="login-check-verification-code-failed",e.REVERIFY_REQUIRED="login-reverify-required",e.LOGIN_FAILURE="login-failed",e.SIFT_VERIFY_ERROR_CODE="member_sift_verify_error",e.REVERIFY_ERROR_CODE="member_sent_reverify_email_error",e.WRONG_CREDENTIALS_CODE="member_wrong_credentials_error",e.RATE_LIMIT_EXCEEDED="member_login_fails_ip_error",e.BLOCKED_IP="member_blocked_ip_error",e.BLOCKED_MEMBER="blocked_member_error",e.PASSWORD_RESET_REQUIRED="member_password_reset_required_error",e.BOUNCED="member_bounced_error",e.INITIAL_3RD_PARTY_REG="member_registered_by_third_party_error"}(m||(m={})),function(e){e.LOGIN="LOGIN",e.FORGOT_PASSWORD="FORGOT_PASSWORD",e.SIFT_VERIFICATION="SIFT_VERIFICATION",e.REVERIFY_MEMBER="REVERIFY_MEMBER",e.FORGOT_PASSWORD_SUCCESS="FORGOT_PASSWORD_SUCCESS"}(f||(f={}));const v=(e,r)=>{e&&"string"===typeof e&&(0,a.E)(e)?r(e):r((0,i.cd)())},p=e=>{try{return["","/"].includes(new URL(e).pathname)?(0,i.cd)():e}catch(r){return(0,i.cd)()}},b=e=>{var r;return(null===e||void 0===e?void 0:e.verificationRequired)&&(null===e||void 0===e?void 0:e.memberId)&&"0"!==(null===e||void 0===e?void 0:e.memberId)&&(null===e||void 0===e?void 0:e.reverifyToken)&&(null===e||void 0===e||null===(r=e.error)||void 0===r?void 0:r.code)===m.SIFT_VERIFY_ERROR_CODE},g=e=>{var r;return(null===e||void 0===e?void 0:e.memberId)&&"0"!==(null===e||void 0===e?void 0:e.memberId)&&(null===e||void 0===e?void 0:e.reverifyToken)&&(null===e||void 0===e||null===(r=e.error)||void 0===r?void 0:r.code)===m.REVERIFY_ERROR_CODE},E=e=>e&&!(null!==e&&void 0!==e&&e.error),O=(e,r)=>{switch(e){case m.WRONG_CREDENTIALS_CODE:return(0,c.jsx)(o.Z,u({},s.Z.loginValidationError));case m.RATE_LIMIT_EXCEEDED:case m.BLOCKED_IP:return(0,c.jsx)(o.Z,u({},s.Z.loginRateLimitError));case m.BLOCKED_MEMBER:return(0,c.jsx)(o.Z,u(u({},s.Z.loginBlockedMemberError),{},{values:{helpLink:(0,c.jsx)("a",{href:(0,i.dh)(),className:"ds-font-body-medium hover:no-underline underline","data-element-name":l.Nh.disabledAccount,children:(0,c.jsx)(o.Z,u({},s.Z.helpCenter))})}}));case m.BOUNCED:return(0,c.jsx)(o.Z,u(u({},s.Z.loginBouncedError),{},{values:{helpLink:(0,c.jsx)("a",{href:(0,i.Gf)(),className:"ds-font-body-medium hover:no-underline underline","data-element-name":l.Nh.supportTicket,children:(0,c.jsx)(o.Z,u({},s.Z.submitRequest))})}}));case m.PASSWORD_RESET_REQUIRED:return(0,c.jsx)(o.Z,u(u({},s.Z.loginPasswordResetError),{},{values:{forgotPasswordLink:(0,c.jsx)("a",{onClick:r,href:(0,i.Tt)(),className:"ds-font-body-medium hover:no-underline underline","data-element-name":l.Nh.forgotPassword,children:(0,c.jsx)(o.Z,u({},s.Z.here))})}}));case m.REVERIFY_ERROR_CODE:return(0,c.jsx)(o.Z,u({},s.Z.reverifyError));case m.INITIAL_3RD_PARTY_REG:return(0,c.jsx)(o.Z,u(u({},s.Z.initial3rdPartyError),{},{values:{LINK:(0,c.jsx)("a",{onClick:r,href:(0,i.Tt)(),className:"ds-font-body-medium hover:no-underline underline","data-element-name":l.Nh.forgotPassword,children:(0,c.jsx)(o.Z,u({},s.Z.initial3rdPartyErrorLink))})}}));default:return(0,c.jsx)(o.Z,u({},s.Z.loginError))}}},17842:function(e,r,t){"use strict";var n=t(67294),o=t(33289),i=t(65424),a=t(1719),s=t(33160);r.Z=()=>{var e,r;const[t,{data:l,error:c,called:d}]=(0,o.GGd)(),u=!!(c||null!==l&&void 0!==l&&null!==(e=l.loginWithThirdPartyService)&&void 0!==e&&e.error),m=!(!d||!l||c||null!==l&&void 0!==l&&null!==(r=l.loginWithThirdPartyService)&&void 0!==r&&r.error);return{login:(0,n.useCallback)(((e,r,n)=>{var o;return t({variables:{input:{token:e,refreshToken:n,grantType:(0,s.hl)(r,!!n),service:r}},context:{headers:{[i.eX]:null===(o=(0,i.pc)())||void 0===o?void 0:o.token,[a.G]:(0,a.V)()}}})}),[t]),loginError:u,loginSuccess:m,called:d}}},38718:function(e,r,t){"use strict";var n=t(92809),o=t(10219),i=t(94184),a=t.n(i),s=t(28755),l=t(91894),c=t(85893);const d=["variant","disabled","isRounded"];function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=e=>{let{variant:r,disabled:t,isRounded:n=!1}=e,i=(0,o.Z)(e,d);const u=a()(i.className,(0,s.Me)(r),n&&l.eP,t&&l.JU),f=t?{onClick:e=>{e.preventDefault(),e.stopPropagation()},href:"#"}:void 0;return(0,c.jsx)("a",m(m(m({},i),{},{className:u},f),{},{children:i.children}))}},11826:function(e,r,t){"use strict";var n=t(10219),o=t(92809),i=t(67294),a=t(94184),s=t.n(a),l=t(63226),c=t.n(l),d=t(85893);const u=["className","children","wrapperId","style","wrapperStyle","isHideIcon","inputClassName"];function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const v=e=>(0,d.jsx)("svg",f(f({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-testid":"svg-checked"},e),{},{children:(0,d.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})),p=e=>(0,d.jsx)("svg",f(f({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-testid":"svg-unchecked"},e),{},{children:(0,d.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})),b=e=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,f(f({},e),{},{className:"fill-current ".concat(e.checked?"block":"hidden")})),(0,d.jsx)(p,f(f({},e),{},{className:"fill-current ".concat(e.checked?"hidden":"block")}))]}),g=(0,i.forwardRef)(((e,r)=>{let{className:t,children:o,wrapperId:i,style:a,wrapperStyle:l,isHideIcon:m,inputClassName:v}=e,p=(0,n.Z)(e,u);return(0,d.jsxs)("label",{className:s()("flex",c().Checkbox,t),htmlFor:p.id,id:i,style:l,"data-testid":"Checkbox",children:[(0,d.jsxs)("div",{className:"mr-2 text-viridian self-start",children:[(0,d.jsx)("input",f(f({ref:r,type:"checkbox"},p),{},{className:s()("absolute opacity-0 z-0 w-1 h-1 overflow-hidden",v)})),!m&&(0,d.jsx)(b,{"aria-hidden":"true",checked:p.checked})]}),o]})}));g.displayName="Checkbox",r.Z=g},1719:function(e,r,t){"use strict";t.d(r,{G:function(){return o},V:function(){return i}});var n=t(44586);const o="X-Tracking-Request-Id",i=()=>(0,n.Z)()},48848:function(e,r,t){"use strict";t.d(r,{l:function(){return n},E:function(){return o}});const n=/^(https?:\/\/)?([\w\d-_]+)\.([\w\d-_.]+)\/?\??([^#\n\r]*)?#?([^\n\r]*)/i,o=e=>!!e.match(n)},58922:function(e){e.exports={a27i9ef:"a27i9ef",d1jywajc:"d1jywajc"}},51615:function(e){e.exports={c1jwr8t4:"c1jwr8t4"}},6688:function(e){e.exports={c1akf99s:"c1akf99s"}},86456:function(e){e.exports={sq0xflc:"sq0xflc"}},75059:function(e){e.exports={dljoyr2:"dljoyr2"}},77049:function(e){e.exports={c1g28vq9:"c1g28vq9"}},63226:function(e){e.exports={Checkbox:"Checkbox_Checkbox__2YN_N"}}}]);